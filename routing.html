<!doctype html><html><head><title>routemaster by synapticloop</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]--><link rel="stylesheet" href="assets/css/main.css" /><!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]--><script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script></head><body><div id="header"><h1 id="logo"><a href="http://synapticloop.github.io/">Synapticloop</a> :: <a href="index.html">routemaster</a></h1><nav id="nav"><ul><li><a href="#">Projects</a><ul><li><a href="https://synapticloop.github.io/h2zero/"><i class="icon fa-database"></i> h2zero</a></li><li><a href="https://github.com/synapticloop/backblaze-b2-java-api/"><i class="icon fa-puzzle-piece"></i> backblaze b2 java api</a></li><li><a href="https://synapticloop.github.io/templar/"><i class="icon fa-shield"></i> templar</a></li><li><a href="https://synapticloop.github.io/templar-gen/"><i class="icon fa-gears"></i> templar gen</a></li><li><a href="https://synapticloop.github.io/linode-api/"><i class="icon fa-puzzle-piece"></i> linode java api</a></li><li><a href="https://github.com/synapticloopltd/scaleway-java-api/"><i class="icon fa-puzzle-piece"></i> scaleway java api</a></li><li><a href="https://synapticloopltd.github.io/gradle-plugin-java-create/"><i class="icon fa-gears"></i> gradle plugin creator for java</a></li><li><a href="https://synapticloopltd.github.io/recipease/"><i class="icon fa-spoon"></i> recipease</a></li><li><a href="https://synapticloop.github.io/routemaster/"><i class="icon fa-bus"></i> routemaster</a></li></ul></li></ul></nav></div><section id="banner"><h2>Welcome to RouteMaster</h2><p>A simple router for the truly excellent NanoHTTPD</p></section><section id="main"><div class="container"><div class="row 200%"><div class="4u 12u$(medium)"><section id="sidebar"><section><h3>routemaster</h3><p>A simple WebServer with RESTful routes</p><hr /><ul><li><a href="index.html">Home</a></li><li><a href="quick-start.html">Quick Start</a></li><li><a href="configuration.html">Configuration</a></li><li><a href="routing.html">Routing</a><ul><li><a href="simple-routes.html">Simple routes</a></li><li><a href="restful-routes.html">RESTFul routes</a></li></ul></li><li>Built-in servants<ul><li><a href="static-file-list.html">Static file listing</a></li><li><a href="static-classpath.html">Static classpath resources</a></li><li><a href="static-file.html">Static resources</a></li></ul></li><li><a href="handlers.html">Handlers</a></li><li><a href="putting-it-all-together.html">Putting it all together</a></li></ul></section><hr /><section><h3>View this project on github</h3><footer><ul class="actions"><li><a href="https://github.com/synapticloop/routemaster" class="button small alt">GitHub Project</a></li></ul></footer></section><hr /><section><h3>templar-gen</h3><p>This project is maintained by <a href="https://github.com/synapticloop">synapticloop</a> and these pages were generated with <a href="https://github.com/synapticloop/templar-gen/">synapticloop templar-gen</a></p></section></section></div><div class="8u$ 12u$(medium) important(medium)"><section id="content"><h3>Routing <em>(including handlers)</em></h3><p>To understand how the routing works, a quick introduction to the code flow is provided below:</p><h4>code flow</h4><ol><li><code>synapticloop.nanohttpd.RouteMasterServer</code> is instantiated and listens on the defined port (default 5474), and the defined host (default 127.0.0.1).  All incoming requests then invoke the <code>RouteMaster.route</code> method.</li><li><code>synapticloop.nanohttpd.router.RouteMaster.route(File rootDir, IHTTPSession httpSession)</code> is invoked for <em>EVERY</em> request.  This will determine which router should be invoked for the incoming request.  To determine which router to invoke, the following flow is followed:<ol><li>If the route is cached, then the router is known and is invoked.</li><li>If the route is not cached, then the <code>synapticloop.nanohttpd.router.Router.route</code> method is invoked, which will return the assigned router</li></ol></li><li><code>synapticloop.nanohttpd.router.Router.route(IHTTPSession httpSession, StringTokenizer stringTokenizer)</code> is invoked to determine which router should handle the incoming request.  This will walk the URL path until a suitable router is found.</li><li><code>serveResource(File rootDir, IHTTPSession httpSession)</code> depending on which router is found, this method is invoked, and depending on the functionality of the implementation, will depend on whether <code>Handler</code>s are theninvoked.</li><li>In the instance of the <code>synapticloop.nanohttpd.servant.ClasspathFileServant</code>, the handlers are then consulted as to whether they will be able to handle the request.  If so, the <code>Handler</code> will be invoked <em>before</em> the <code>Servant</code>.  Note that each implementation may work differently, and use the local file before invoking the <code>Handler</code>.</li></ol><h4>Wildcard routes</h4><p>Wildcard routes allow you to bind a specific router to multiple URLs.  The simplest example is the:</p><pre><code>route./*=synapticloop.nanohttpd.servant.StaticFileServant</code></pre><p>Which binds the root of the site (i.e. <code>/</code>) and all paths beyond it that are not bound to any other route.  Contrast this with the following:</p><pre><code>route./=synapticloop.nanohttpd.servant.StaticFileServant</code></pre><p>Which only binds the root of the site to the <code>StaticFileServant</code> and no other routes.</p><blockquote>In fact, if you only wanted to spin up a static file web server, you could use the above route (<code>route./*=synapticloop.nanohttpd.servant.StaticFileServant</code>) and that is all that would be needed.</blockquote><p>To understand the different types of routers, have a look at the <a href="simple-routes.html">simple routes</a> and<a href="restful-routes.html">RESTful routes</a> documentation.</p><h4>Handlers</h4><p>Handlers are implementation specific and work on an extension basis, i.e. handlers are mapped to specific extensions.  If a file exists on either the filesystem or classpath which may either be served the <code>Servant</code> or <code>Handler</code>, then the precedence from a syanpticloop convention should use the <code>Handler</code> first.</p><blockquote><strong>However</strong>: It must be noted that whilst synapticloop observes this convention, it is not a pre-requisite and other <code>Handler</code>s may use differing conventions and favour the local resource.</blockquote></section></div></div></div></section><div id="footer"><div class="container"><div class="row 200% uniform"></div></div><div class="copyright">&copy; Synapticloop. All rights reserved.</div><div class="copyright">This page uses the <a href="https://pixelarity.com/gravity?ref=4951149295">Gravity</a> commercial template from <a href="https://pixelarity.com/?ref=4951149295">Pixelarity</a> which we thoroughly recommend.</div></div><script src="assets/js/jquery.min.js"></script><script src="assets/js/skel.min.js"></script><script src="assets/js/jquery.dropotron.min.js"></script><script src="assets/js/jquery.onvisible.min.js"></script><script src="assets/js/jquery.poptrox.min.js"></script><script src="assets/js/util.js"></script><!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]--><script src="assets/js/main.js"></script><script type="text/javascript">
	var _paq = _paq || [];
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u="//piwik.synapticloop.com/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', 13]);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>
<noscript><p><img src="//piwik.synapticloop.com/piwik.php?idsite=13" style="border:0;" alt="" /></p></noscript>
<script src="javascripts/prettify.js" type="text/javascript" ></script>
</body></html>